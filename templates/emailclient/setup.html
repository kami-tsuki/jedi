{% extends 'base.html' %}

{% block title %}Email Setup - J.E.D.I.{% endblock %}

{% block extra_head %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/email.css') }}">
{% endblock %}

{% block content %}
<div class="email-setup-container">
    <div class="card setup-card">
        <div class="card-header">
            <h2><i class="fas fa-envelope"></i> Email Account Setup</h2>
            <p>Configure your email account to use with J.E.D.I.</p>
        </div>
        <div class="card-body">
            <form method="POST" action="{{ url_for('email.setup') }}" class="setup-form">
                <div class="form-group">
                    <label for="username">Email Address</label>
                    <input type="email" id="username" name="username" class="form-control"
                           value="{{ settings.username if settings else '' }}" required>
                </div>

                <div class="form-group">
                    <label for="password">Password</label>
                    <div class="password-input">
                        <input type="password" id="password" name="password" class="form-control"
                               value="{{ settings.password if settings else '' }}" required>
                        <button type="button" class="toggle-password" aria-label="Toggle password visibility">
                            <i class="fas fa-eye"></i>
                        </button>
                    </div>
                </div>

                <div class="server-settings">
                    <h3>Incoming Mail Server (IMAP)</h3>
                    <div class="form-row">
                        <div class="form-group col-md-8">
                            <label for="imap_server">Server</label>
                            <input type="text" id="imap_server" name="imap_server" class="form-control"
                                   value="{{ settings.imap_server if settings else '' }}" required>
                        </div>
                        <div class="form-group col-md-4">
                            <label for="imap_port">Port</label>
                            <input type="number" id="imap_port" name="imap_port" class="form-control"
                                   value="{{ settings.imap_port if settings else 993 }}" required>
                        </div>
                    </div>

                    <h3>Outgoing Mail Server (SMTP)</h3>
                    <div class="form-row">
                        <div class="form-group col-md-8">
                            <label for="smtp_server">Server</label>
                            <input type="text" id="smtp_server" name="smtp_server" class="form-control"
                                   value="{{ settings.smtp_server if settings else '' }}" required>
                        </div>
                        <div class="form-group col-md-4">
                            <label for="smtp_port">Port</label>
                            <input type="number" id="smtp_port" name="smtp_port" class="form-control"
                                   value="{{ settings.smtp_port if settings else 587 }}" required>
                        </div>
                    </div>
                </div>

                <div class="preset-options">
                    <h3>Quick Setup</h3>
                    <p>Choose a provider to auto-fill server settings:</p>
                    <div class="preset-buttons">
                        <button type="button" class="btn preset-btn" data-preset="gmail">
                            <i class="fab fa-google"></i> Gmail
                        </button>
                        <button type="button" class="btn preset-btn" data-preset="outlook">
                            <i class="fab fa-microsoft"></i> Outlook
                        </button>
                        <button type="button" class="btn preset-btn" data-preset="yahoo">
                            <i class="fab fa-yahoo"></i> Yahoo
                        </button>
                    </div>
                </div>

                <div class="form-actions">
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-save"></i> Save Settings
                    </button>
                    <a href="{{ url_for('email.index') }}" class="btn btn-outline">
                        <i class="fas fa-arrow-left"></i> Back
                    </a>
                </div>
            </form>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/email-setup.js') }}"></script>
{% endblock %}
<!--ç¥ž-->